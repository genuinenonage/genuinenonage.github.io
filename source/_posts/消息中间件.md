---
title: 消息中间件
date: 2020/7/20 9:00:00
updated: 2020/7/30 10:13:00
tags: 
- 中间件
categories:
- 中间件
---
## 消息中间件  
### 中间件  
非底层操作系统软件，非业务应用软件，不是直接给最终用户使用的，不能直接给客户带来价值的软件统称为中间件。  
### 什么是消息中间件  
关注数据的发送和接受，利用高效可靠的异步消息传递机制集成分布式系统。  
### JMS  
Java消息服务（Java Message Service），一个Java平台中关于面向消息中间件的API，用于两个应用程序之间，或分布式系统中发送消息，进行异步通信。  
#### JSM相关概念  
提供者：实现JSM规范的消息中间件服务器  
客户端：发送或接受消息的应用程序  
生产者/发布者：创建并发送消息的客户端  
消费者/订阅者：接受并处理消息的客户端  
消息：应用程序之间传递的数据内容  
消息模式：在客户端之间传递消息的方式，JSM中定义了主题和队列两种模式。
### AMQP  
advanced massage queuing protocol 是一个提供统一服务的应用层标准协议，基于此协议的客户端与消息中间件传递消息，不受客户端/中间件不同产品，不同开发语言等条件的限制。  
### 常见消息中间件  
#### ActiveMQ  
完全支持JMS1.1和J2EE1.4规范的JMS Provider实现。  
优点：遵循JMS规范，安装部署方便。    
#### RabbitMQ  
开源的AMQP实现，服务端采用Erlang语言编写。用于分布式系统中存储转发消息。  
优点：继承Erlang天生的并发性，最初用于金融行业，稳定性，安全性有保障。  
#### Kafka  
高吞吐量的分布式发布订阅消息系统，分布式的、分区的、可靠的分布式日志存储服务。  
优点：依赖zk，可动态扩展节点，高性能、高吞吐量、无限扩容，消息可指定追溯。  
### 队列模式  
客户端包括生产者和消费者  
队列中的消息只能被一个消费者消费  
消费者可以随时消费队列中的消息  
### 主题模型  
客户端包括发布者和订阅者  
主题中的消息被所有订阅者消费   
消费者不能消费订阅之前就发送到主题中的消息  
### JMS编码接口  
ConnectionFactory 用于创建连接到消息中间件的连接工厂  
Connection 应用程序和消息服务器之间的通信链路  
Destination 消息发布和接受的地点，包括队列或主题  
Session 一个单线程的上下文，用于发送和接受消息  
MessageConsumer 由会话创建，用于接受发送到目标的消息  
MessageProducer 有会话创建，用于发送消息到目标  
Message 是在消费者和生产者之间传送的对象，消息头，一组消息属性，一个消息体。

